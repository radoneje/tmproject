extends layout
block head
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

block content
    #app.container
        .row
            .col-2
                .d-grid.gap-2
                    .btn.mb-3(v-bind:class='{"btn-primary":section==0, "btn-outline-secondary":section!=0}' v-on:click="section=0" style="text-align: left;") Общая информация
                    .btn.mb-3(v-bind:class='{"btn-primary":section==1, "btn-outline-secondary":section!=1}' v-on:click="section=1" style="text-align: left;") Видео
                    .btn.mb-3(v-bind:class='{"btn-primary":section==2, "btn-outline-secondary":section!=2}' v-on:click="section=2" style="text-align: left;") Услуги
                    .btn.mb-3(v-bind:class='{"btn-primary":section==3, "btn-outline-secondary":section!=3}' v-on:click="section=3" style="text-align: left;") Команда и география
                    .btn.mb-3(v-bind:class='{"btn-primary":section==4, "btn-outline-secondary":section!=4}' v-on:click="section=4" style="text-align: left;") Клиенты
                    .btn.mb-3(v-bind:class='{"btn-primary":section==5, "btn-outline-secondary":section!=5}' v-on:click="section=5" style="text-align: left;") Все проекты
            .col-10
                div(v-if="section==0")
                    h4 Общие параметры
                    .input-group.mb-3
                        span.Allparams.input-group-text Организованно мероприятий
                        input( type="text" class="form-control"  placeholder="Введите число" v-model="general.projectCount" v-on:change="saveGeneral()" )
                    .input-group.mb-3
                        span.Allparams.input-group-text Слоган
                        input( type="text" class="form-control"  placeholder="Введите слоган" v-model="general.slogan" v-on:change="saveGeneral()" )
                    .input-group.mb-3
                        span.Allparams.input-group-text Речевка
                        input( type="text" class="form-control"  placeholder="Введите речевку" v-model="general.rechevka" v-on:change="saveGeneral()" )
                    img.img-thumbnail(:src="general.mainImgUrl")
                    .input-group.mb-3
                        span.Allparams.input-group-text Подпись гл. картинки
                        input( type="text" class="form-control"  placeholder="Введите подпись гл. картинки" v-model="general.mainImgDescr" v-on:change="saveGeneral()" )
                    .input-group.mb-3
                        span.Allparams.input-group-text URL гл. картинки (616x489)
                        input( type="text" class="form-control"  placeholder="Введите URL главной картинки" v-model="general.mainImgUrl" v-on:change=" saveGeneral()" )
                        span.input-group-text.pointer(v-on:click="uploadMainImage()") <iconify-icon icon="bi:upload"></iconify-icon>
                    .input-group.mb-3
                        span.Allparams.input-group-text URL презентации (pdf)
                        input( type="text" class="form-control"  placeholder="Введите URL URL презентации" v-model="general.preza" v-on:change=" saveGeneral()" )
                        span.input-group-text.pointer(v-on:click="uploadPreza()") <iconify-icon icon="bi:upload"></iconify-icon>
                div(v-if="section==1")
                    .btn.btn-secondary.btn-sm.mb-3(v-on:click="videoAdd()") Добавить видео
                    .aVideoBox
                        .aVideoItem(v-for="item in videos" v-bind:class="{active:item.isActive}")
                            .aVideoItemImg.flex.center
                                div Вставьте изображение<br>пропорция 16/9
                                .aVideoItemImgBox(v-if="item.imageLink" :style="{'background-image':'url('+item.imageLink+')'}")
                            input.form-control.form-control-sm.mt-2.mb-2(v-model="item.YTlink" placeholder="YouTube link" v-on:change="saveVideo(item)")
                            .flex.between
                                .btn-group.flex.left
                                    .btn.btn-danger.btn-sm(v-if="!item.isActive" v-on:click="changeVideoActive(item)")
                                        iconify-icon(icon="bi:lightbulb-off")
                                    .btn.btn-success.btn-sm(v-else v-on:click="changeVideoActive(item)")
                                        iconify-icon(icon="bi:lightbulb")
                                    .btn.btn-secondary.btn-sm(v-on:click="addImageVideo(item)")
                                        iconify-icon(icon="bi:image")
                                .btn.btn-danger.btn-sm(v-on:click="deleteVideo(item)")
                                    iconify-icon(icon="bi:trash")
                div(v-if="section==2")
                    .aServBox.flex.between
                            .aServItem(v-for="sect in sections")
                                .aServItemTitle {{sect.t}}
                                .btn.btn-secondary.btn-sm.mb-3(v-on:click="addService(sect.id)") Добавить
                                .aServItemBox
                                    .input-group.mb-3(v-for="item in services[sect.id]")
                                        span.input-group-text.pointer(v-if="item.isActive" v-on:click="toggleService(sect.id, item,'isActive')")
                                            iconify-icon.green(icon="bi:lightbulb")
                                        span.input-group-text.pointer(v-else v-on:click="toggleService(sect.id, item,'isActive')")
                                            iconify-icon.red(icon="bi:lightbulb-off")
                                        input( type="text" v-model="item.title" class="form-control"  placeholder="Введите текст"  v-on:change="saveService(sect.id, item)" )
                                        span.input-group-text.pointer.red(v-on:click="toggleService(sect.id, item, 'isDeleted')")
                                            iconify-icon.red(icon="bi:trash")
                div(v-if="section==3")
                    .aServBox.flex.between
                        .aServItem(v-for="sect in commands")
                            .btn.btn-secondary.btn-sm.mb-3(v-on:click="addService(sect.id)") Добавить заголовок
                            .aServItemBox
                                .input-group(v-for="item in geografy[sect.id]")
                                    span.input-group-text.pointer(v-if="item.isActive" v-on:click="toggleGeografy(sect.id, item,'isActive')")
                                        iconify-icon.green(icon="bi:lightbulb")
                                    span.input-group-text.pointer(v-else v-on:click="toggleGeografy(sect.id, item,'isActive')")
                                        iconify-icon.red(icon="bi:lightbulb-off")
                                    input( type="text" v-model="item.title" class="form-control"  placeholder="Введите текст"  v-on:change="saveService(sect.id, item)" )
                                    span.input-group-text.pointer.red(v-on:click="toggleGeografy(sect.id, item, 'isDeleted')")
                                        iconify-icon.red(icon="bi:trash")



block footer
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js" integrity="sha512-L4lHq2JI/GoKsERT8KYa72iCwfSrKYWEyaBxzJeeITM9Lub5vlTj8tufqYk056exhjo2QDEipJrg6zen/DDtoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.2/iconify-icon.min.js"></script>
    <script src="/javascripts/vue.min.js"></script>
    <script src="/javascripts/adminScript.js"></script>
